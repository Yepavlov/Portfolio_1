<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="e3a8e452-d8b0-4240-8838-21aa7f582097" activeEnvironment="Default" name="REST Project 1" resourceRoot="" soapui-version="5.7.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="277ca944-3b29-4986-97a1-3ffd3b66c6a5" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://qauto2.forstudy.space" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://qauto2.forstudy.space</con:endpoint></con:endpoints><con:resource name="api" path="/api" id="4421dd09-08f0-4d3c-b389-4e9dc1fa79ab"><con:settings/><con:parameters/><con:resource name="auth" path="auth" id="fb9e5f48-6c0e-4f54-8ca1-75fd89391cb9"><con:settings/><con:parameters/><con:resource name="signin" path="signin" id="93d2c5cc-29c6-49bc-b17e-501b49217142"><con:settings/><con:parameters/><con:method name="Login" id="c1cbff16-51c0-485f-b3db-bff338155572" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html; charset=utf-8</con:mediaType><con:status>429</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:sig="https://qauto2.forstudy.space/api/auth/signin">sig:Response</con:element></con:representation><con:request name="Request 1" id="9424435d-7f83-49a5-9424-b168a7968d8c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://qauto2.forstudy.space</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:resource><con:resource name="cars" path="cars" id="bb7cf316-449f-4025-8b81-acc8d8f3fc54"><con:settings/><con:parameters/><con:resource name="brands" path="brands" id="07ceb1d1-dc43-4f11-948c-c0b38464b5c8"><con:settings/><con:parameters/><con:method name="GetBrand" id="7ebcc07e-db14-482d-b508-e40611377201" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:bran="https://qauto2.forstudy.space/api/cars/brands">bran:Response</con:element></con:representation><con:request name="Request 1" id="c15f7d9d-c9ec-4346-af65-31cedcd913c0" mediaType="application/json"><con:settings/><con:endpoint>https://qauto2.forstudy.space</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="models" path="models" id="1330dbc3-d5b6-4ce0-974c-19dceefc60b1"><con:settings/><con:parameters><con:parameter><con:name>carBrandId</con:name><con:value>{{RandomBrandCarId}}</con:value><con:style>QUERY</con:style><con:default>{{RandomBrandCarId}}</con:default></con:parameter></con:parameters><con:method name="GetBrandModel" id="a93ab040-adf8-44e4-86c5-05cee0c102e9" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:mod="https://qauto2.forstudy.space/api/cars/models">mod:Response</con:element></con:representation><con:request name="Request 1" id="76511f83-8547-4cd7-aaee-fc4ff71704c1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://qauto2.forstudy.space</con:endpoint><con:request/><con:originalUri>https://qauto2.forstudy.space/api/cars/models</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="carBrandId" value="xxx" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:method name="AddCar" id="d9146d7f-a71a-4a88-a25d-f775352cfafd" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>401</con:status><con:params/><con:element xmlns:cars="https://qauto2.forstudy.space/api/cars">cars:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>201</con:status><con:params/><con:element xmlns:cars="https://qauto2.forstudy.space/api/cars">cars:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="39d8a7f2-ccaf-4a2b-b51d-c1f265d9e852" mediaType="application/json" postQueryString="false"><con:settings/><con:endpoint>https://qauto2.forstudy.space</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="expenses" path="expenses" id="96ced1e4-30eb-4835-87a5-60487a4e5e92"><con:settings/><con:parameters><con:parameter><con:name>carId</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="AddExpense" id="ad43b576-af3a-4b8b-ad8d-6ae9caaf9edc" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>400 401 500</con:status><con:params/><con:element xmlns:exp="https://qauto2.forstudy.space/api/expenses">exp:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:exp="https://qauto2.forstudy.space/api/expenses">exp:Response</con:element></con:representation><con:request name="Request 1" id="4e5673a1-993a-497d-9111-dd70ee03a93c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://qauto2.forstudy.space</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="carId" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>carId</con:entry></con:parameterOrder></con:request></con:method><con:method name="GetExpenses" id="09db565e-62ce-40dd-ad81-83d9cf44b3d5" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>401</con:status><con:params/><con:element xmlns:exp="https://qauto2.forstudy.space/api/expenses">exp:Fault</con:element></con:representation><con:request name="Request 1" id="d9bd079c-d718-435c-beb7-871b6caa676d" mediaType="application/json"><con:settings/><con:endpoint>https://qauto2.forstudy.space</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="carId" value="{{CarId}}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>carId</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:resource></con:interface><con:testSuite id="afb515cb-56e7-4293-bcfb-8d9bb93d46e0" name="QAuto2TS"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="758dd39e-48d4-4390-a046-a011bea4c7c4" failOnError="true" failTestCaseOnErrors="true" keepSession="true" maxResults="0" name="AddCarAddExpense" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="properties" name="Data" id="d9b7c73b-fae6-48cd-a048-73e8852c706b"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>userName</con:name><con:value>ff2-15@ukr.net</con:value></con:property><con:property><con:name>password</con:name><con:value>Pavlov1989</con:value></con:property><con:property><con:name>carBrandId</con:name><con:value>4</con:value></con:property><con:property><con:name>carModelId</con:name><con:value>18</con:value></con:property><con:property><con:name>CarId</con:name><con:value>33133</con:value></con:property><con:property><con:name>CurrentMileage</con:name><con:value>530</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="LoginStep" id="41b47bbb-fd62-4ff9-af03-8fbfff5e55f6"><con:settings/><con:config service="https://qauto2.forstudy.space" resourcePath="/api/auth/signin" methodName="Login" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="LoginStep" id="9424435d-7f83-49a5-9424-b168a7968d8c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://qauto2.forstudy.space</con:endpoint><con:request>{
    "email": "${Data#userName}",
    "password": "${Data#password}",
    "remember": false
}</con:request><con:originalUri>https://qauto2.forstudy.space/api/auth/signin</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c4693782-8a49-47f3-8ffb-61e9e09b1c30" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="GetBrand" id="95c4e330-144b-455e-a883-c7a300a3f498"><con:settings/><con:config service="https://qauto2.forstudy.space" resourcePath="/api/cars/brands" methodName="GetBrand" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetBrand" id="c15f7d9d-c9ec-4346-af65-31cedcd913c0" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://qauto2.forstudy.space</con:endpoint><con:request/><con:originalUri>https://qauto2.forstudy.space/api/cars/brands</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="2bbcb70d-0357-4b33-9451-17fab0c17587" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Script getBrand" id="4e3695c5-c5aa-49d7-a281-b5f8a4c981ef"><con:settings/><con:config><script>import groovy.json.JsonSlurper


def jsonSlurper = new JsonSlurper()

def responseString =  testRunner.getTestCase().getTestStepByName("GetBrand").getTestRequest().getResponseContentAsString()
def object = jsonSlurper.parseText(responseString)
def size = object.data.size()
def RandonInt = Math.abs(new Random().nextInt() % size) + 1 
def RandomId = object.data[RandonInt - 1].id
testRunner.getTestCase().getTestStepByName("Data").setPropertyValue("carBrandId", RandomId.toString() )</script></con:config></con:testStep><con:testStep type="restrequest" name="GetModel" id="c7bc9800-c14e-46f9-b6a4-0c30c9700aed"><con:settings/><con:config service="https://qauto2.forstudy.space" resourcePath="/api/cars/models" methodName="GetBrandModel" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetModel" id="76511f83-8547-4cd7-aaee-fc4ff71704c1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://qauto2.forstudy.space</con:endpoint><con:request/><con:originalUri>https://qauto2.forstudy.space/api/cars/models</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f4b1752f-870c-43a4-b868-8ebbd39b0a37" name="Valid HTTP Status Codes"><con:configuration><codes>200
</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="carBrandId" value="${Data#carBrandId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="ScriptgetBrand" id="13a7f29d-96d2-4560-8f56-45d8a9239f1c"><con:settings/><con:config><script>import groovy.json.JsonSlurper


def jsonSlurper = new JsonSlurper()

def responseString =  testRunner.getTestCase().getTestStepByName("GetModel").getTestRequest().getResponseContentAsString()
def object = jsonSlurper.parseText(responseString)
def size = object.data.size()
def RandonInt = Math.abs(new Random().nextInt() % size) + 1 
def RandomId = object.data[RandonInt - 1].id
testRunner.getTestCase().getTestStepByName("Data").setPropertyValue("carModelId", RandomId.toString() )</script></con:config></con:testStep><con:testStep type="restrequest" name="AddCarStep" id="bd0b7620-5eb6-49e1-a7de-d4bd4997567b"><con:settings/><con:config service="https://qauto2.forstudy.space" resourcePath="/api/cars" methodName="AddCar" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="AddCarStep" id="39d8a7f2-ccaf-4a2b-b51d-c1f265d9e852" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://qauto2.forstudy.space</con:endpoint><con:request>{
    "carBrandId": ${Data#carBrandId},
    "carModelId": ${Data#carModelId},
    "mileage": 0
}</con:request><con:originalUri>https://qauto2.forstudy.space/api/cars</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7f07241d-d3ab-4003-b37a-d5756d3d42f3" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="CarIdTransfer" id="6b092229-1407-4b20-ae63-6cb13bccaed4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>CarId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>AddCarStep</con:sourceStep><con:sourcePath>data.id</con:sourcePath><con:targetType>CarId</con:targetType><con:targetStep>Data</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="AddExpense" id="2773d895-af87-4157-b80e-efa46fa05897"><con:settings/><con:config service="https://qauto2.forstudy.space" resourcePath="/api/expenses" methodName="AddExpense" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="AddExpense" id="4e5673a1-993a-497d-9111-dd70ee03a93c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://qauto2.forstudy.space</con:endpoint><con:request>{
    "carId": "${Data#CarId}",
    "reportedAt": "${=new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ").format(new Date())}",
    "mileage": 330,
    "liters": 30,
    "totalCost": 30
}</con:request><con:originalUri>https://qauto2.forstudy.space/api/expenses</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="60c2eaa0-e4f5-4cb9-bce4-122e09ed6aac" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="carId" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>carId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="GetCarExpenseStep" id="8545a5a5-6072-41df-80f6-3b0060cd1363"><con:settings/><con:config service="https://qauto2.forstudy.space" resourcePath="/api/expenses" methodName="GetExpenses" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetCarExpenseStep" id="d9bd079c-d718-435c-beb7-871b6caa676d" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://qauto2.forstudy.space</con:endpoint><con:request/><con:originalUri>https://qauto2.forstudy.space/api/expenses</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="673815b1-bd41-4083-92d5-6a4e11ac21c5" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="carId" value="{Data#CarId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>carId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="GetCurrentMileage" id="1e351b4c-64f8-4f1f-ae80-c7c5714de88b"><con:settings/><con:config><script>import groovy.json.JsonSlurper


def jsonSlurper = new JsonSlurper()

def responseString =  testRunner.getTestCase().getTestStepByName("GetCarExpenseStep").getTestRequest().getResponseContentAsString()
def object = jsonSlurper.parseText(responseString)

def maxValue = object.data.stream().max(Comparator.comparing(v -> v.mileage)).get().mileage

testRunner.getTestCase().getTestStepByName("Data").setPropertyValue("CurrentMileage", (maxValue + 40).toString() )</script></con:config></con:testStep><con:testStep type="restrequest" name="AddSecondExpense" id="fdc05259-c3ca-434c-9f64-989ba0a4348f"><con:settings/><con:config service="https://qauto2.forstudy.space" resourcePath="/api/expenses" methodName="AddExpense" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="AddSecondExpense" id="4e5673a1-993a-497d-9111-dd70ee03a93c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://qauto2.forstudy.space</con:endpoint><con:request>{
    "carId": "${Data#CarId}",
    "reportedAt": "${=new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ").format(new Date())}",
    "mileage": ${Data#CurrentMileage},
    "liters": 30,
    "totalCost": 30
}</con:request><con:originalUri>https://qauto2.forstudy.space/api/expenses</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="2ee4097d-20ab-458c-9269-d3f2ec5dbbcb" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="carId" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>carId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:properties/><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/></con:soapui-project>